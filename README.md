# FFTSteg: FFTå›¾ç‰‡éšå†™æœ¯

FFTSteg æ˜¯ä¸€ä¸ªåŸºäºFFTçš„å›¾ç‰‡éšå†™æœ¯å·¥å…·ï¼Œæ”¯æŒå¯¹å›¾ç‰‡è¿›è¡Œæ°´å°åµŒå…¥ã€æå–å’Œæ¢å¤æ“ä½œï¼Œæ”¯æŒä½¿ç”¨ç§é’¥ä¿æŠ¤æ°´å°ã€‚

---

## ğŸŒŸ å›¢é˜Ÿä»‹ç»
å›¢é˜Ÿç»„æˆæ˜¯æ¥è‡ªåå—ç†å·¥å¤§å­¦ï¼ˆSCUTï¼‰ç”µå­ä¸ä¿¡æ¯å­¦é™¢2023çº§ä¿¡æ¯å·¥ç¨‹ï¼ˆåˆ›æ–°ç­ï¼‰çš„4åæœ¬ç§‘å­¦ç”Ÿï¼ˆç¬”ç”»æ’åºï¼‰ï¼š

**é©¬æ¢“è±ªã€å­™è‰ºã€ææ˜Šå³»ã€æ›¾æ–‡åš**

---

## åŠŸèƒ½æ¦‚è§ˆ
- **ç¼–ç ï¼ˆEncodeï¼‰**: å°†æ°´å°åµŒå…¥åˆ°å›¾ç‰‡ä¸­ï¼Œå¯é€‰å›¾ç‰‡æ°´å°æˆ–æ–‡å­—æ°´å°ã€‚
- **è§£ç ï¼ˆDecodeï¼‰**: ä»å¸¦æ°´å°çš„å›¾ç‰‡ä¸­æå–æ°´å°ã€‚
- **æ¢å¤ï¼ˆRestoreï¼‰**: ä»å¸¦æ°´å°çš„å›¾ç‰‡ä¸­æ¢å¤åŸå§‹å›¾ç‰‡ã€‚
- **ç§é’¥ä¿æŠ¤**: ä½¿ç”¨ç§é’¥åŠ å¯†æ°´å°å’ŒåŸå›¾ã€‚

---

## ä½¿ç”¨æ­¥éª¤

### Step 0: ç¯å¢ƒé…ç½®
1. ä¸‹è½½å¹¶å®‰è£… [Miniconda](https://docs.conda.io/en/latest/miniconda.html)ã€‚
2. ä½¿ç”¨YMLæ–‡ä»¶åˆ›å»ºå¹¶æ¿€æ´» `FFTSteg` ç¯å¢ƒï¼š
   ```bash
   conda env create -f FFTSteg.yml
   conda activate FFTSteg
   ```

---

### Step 1: ç¼–ç ï¼ˆæ·»åŠ æ°´å°ï¼‰

#### å‚æ•°è¯´æ˜
- `--mode`: æ“ä½œæ¨¡å¼ï¼Œè®¾ç½®ä¸º `img_encode` æˆ– `txt_encode`ã€‚
  - `img_encode`: ä½¿ç”¨å›¾ç‰‡ä½œä¸ºæ°´å°ã€‚
  - `txt_encode`: ä½¿ç”¨æ–‡æœ¬ç”Ÿæˆæ°´å°ã€‚
- `--ori_img`: åŸå§‹å›¾ç‰‡è·¯å¾„ï¼ˆè¾“å…¥ï¼‰ã€‚
- `--wm_img`: æ°´å°å›¾ç‰‡è·¯å¾„ï¼ˆè¾“å…¥ï¼Œä»…åœ¨ `img_encode` æ¨¡å¼ä¸‹éœ€è¦ï¼‰ã€‚
- `--enc_img`: ç¼–ç åå›¾ç‰‡è¾“å‡ºè·¯å¾„ã€‚
- `--private_key`: ç§é’¥ï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºåŠ å¯†æ°´å°ã€‚
- `--wm_text`: è‡ªå®šä¹‰æ°´å°æ–‡æœ¬ï¼ˆä»…åœ¨ `txt_encode` æ¨¡å¼ä¸‹éœ€è¦ï¼‰ã€‚

#### æ ‡å‡†æ ¼å¼
1. ä½¿ç”¨å›¾ç‰‡æ°´å°ï¼š
   ```bash
   python main.py \
       --mode img_encode \
       --ori_img <åŸå§‹å›¾ç‰‡è·¯å¾„> \
       --wm_img <æ°´å°å›¾ç‰‡è·¯å¾„> \
       --enc_img <ç¼–ç å›¾ç‰‡è¾“å‡ºè·¯å¾„> \
       [--private_key <ç§é’¥>]
   ```

2. ä½¿ç”¨æ–‡æœ¬æ°´å°ï¼š
   ```bash
   python main.py \
       --mode txt_encode \
       --ori_img <åŸå§‹å›¾ç‰‡è·¯å¾„> \
       --enc_img <ç¼–ç å›¾ç‰‡è¾“å‡ºè·¯å¾„> \
       --wm_text <è‡ªå®šä¹‰æ°´å°æ–‡æœ¬> \
       [--private_key <ç§é’¥>]
   ```

#### ç¤ºä¾‹
1. ä½¿ç”¨å›¾ç‰‡æ°´å°ï¼š
   ```bash
   python main.py \
       --mode img_encode \
       --ori_img images/ori/DuXing.png \
       --wm_img images/wm/RFA.png \
       --enc_img images/enc/DuXing_RFA_enc.png \
       --private_key siry
   ```
2. ä½¿ç”¨æ–‡æœ¬æ°´å°ï¼š
   ```bash
   python main.py \
       --mode txt_encode \
       --ori_img images/ori/test1.png \
       --enc_img images/enc/test1_wm1_enc.png \
       --wm_text "ç”Ÿå¦‚å¤èŠ±ä¹‹ç»šçƒ‚" \
       --private_key siry
   ```

3. è‡ªåŠ¨ç”Ÿæˆé»˜è®¤æ–‡æœ¬æ°´å°ï¼š
   ```bash
   python main.py \
       --mode encode \
       --ori_img images/ori/test1.png \
       --enc_img images/enc/test1_wm1_enc.png \
       --private_key siry
   ```

---

### Step 2: è§£ç ï¼ˆæå–æ°´å°ï¼‰

#### å‚æ•°è¯´æ˜
- `--mode`: æ“ä½œæ¨¡å¼ï¼Œè®¾ç½®ä¸º `decode`ã€‚
- `--enc_img_decode`: ç¼–ç å›¾ç‰‡è·¯å¾„ï¼ˆè¾“å…¥ï¼‰ã€‚
- `--ori_img_decode`: åŸå§‹å›¾ç‰‡è·¯å¾„ï¼ˆè¾“å…¥ï¼‰ã€‚
- `--dwm_img`: è§£ç æ°´å°è¾“å‡ºè·¯å¾„ã€‚
- `--private_key`: ç§é’¥ï¼ˆå¯é€‰ï¼‰ï¼Œå¿…é¡»ä¸ç¼–ç æ—¶ç›¸åŒã€‚

#### æ ‡å‡†æ ¼å¼
```bash
python main.py \
    --mode decode \
    --enc_img_decode <ç¼–ç å›¾ç‰‡è·¯å¾„> \
    --ori_img_decode <åŸå§‹å›¾ç‰‡è·¯å¾„> \
    --dwm_img <è§£ç æ°´å°è¾“å‡ºè·¯å¾„> \
    [--private_key <ç§é’¥>]
```

#### ç¤ºä¾‹
```bash
python main.py \
    --mode decode \
    --enc_img_decode images/enc/DuXing_RFA_enc.png \
    --ori_img_decode images/ori/DuXing.png \
    --dwm_img images/dwm/DuXing_RFA_dwm.png \
    --private_key siry
```

---

### Step 3: æ¢å¤ï¼ˆä»å¸¦æ°´å°å›¾ç‰‡æ¢å¤åŸå§‹å›¾ç‰‡ï¼‰

#### å‚æ•°è¯´æ˜
- `--mode`: æ“ä½œæ¨¡å¼ï¼Œè®¾ç½®ä¸º `restore`ã€‚
- `--enc_img_restore`: ç¼–ç å›¾ç‰‡è·¯å¾„ï¼ˆè¾“å…¥ï¼‰ã€‚
- `--wm_img_restore`: æ°´å°å›¾ç‰‡è·¯å¾„ï¼ˆè¾“å…¥ï¼‰ã€‚
- `--re_img`: æ¢å¤å›¾ç‰‡è¾“å‡ºè·¯å¾„ã€‚
- `--private_key`: ç§é’¥ï¼ˆå¯é€‰ï¼‰ï¼Œå¿…é¡»ä¸ç¼–ç æ—¶ç›¸åŒã€‚

#### æ ‡å‡†æ ¼å¼
```bash
python main.py \
    --mode restore \
    --enc_img_restore <ç¼–ç å›¾ç‰‡è·¯å¾„> \
    --wm_img_restore <æ°´å°å›¾ç‰‡è·¯å¾„> \
    --re_img <æ¢å¤å›¾ç‰‡è¾“å‡ºè·¯å¾„> \
    [--private_key <ç§é’¥>]
```

#### ç¤ºä¾‹
```bash
python main.py \
    --mode restore \
    --enc_img_restore images/enc/DuXing_RFA_enc.png \
    --wm_img_restore images/wm/RFA.png \
    --re_img images/re/DuXing_RFA_re.png \
    --private_key siry
```

---

## ç§é’¥ä¿æŠ¤è¯´æ˜
1. **ç§é’¥ä½œç”¨**: ç¡®å®šæ°´å°åœ¨é¢‘åŸŸä¸­çš„åµŒå…¥ä½ç½®ï¼Œç¡®ä¿åªæœ‰æ­£ç¡®çš„ç§é’¥æ‰èƒ½æå–æˆ–æ¢å¤æ•°æ®ã€‚
2. **ç§é’¥æ ¼å¼**: ä»»æ„å­—ç¬¦ä¸²ï¼Œç³»ç»Ÿä¼šå°†å…¶è½¬æ¢ä¸ºæ•°å€¼ç”¨ä½œéšæœºç§å­ã€‚
3. **æ³¨æ„äº‹é¡¹**:
   - è§£ç å’Œæ¢å¤æ—¶å¿…é¡»ä½¿ç”¨ä¸ç¼–ç æ—¶ç›¸åŒçš„ç§é’¥ã€‚
   - ä½¿ç”¨é”™è¯¯çš„ç§é’¥ä¼šå¯¼è‡´æ°´å°æå–å¤±è´¥æˆ–å›¾åƒä¸¥é‡å¤±çœŸã€‚

---

## æ³¨æ„äº‹é¡¹
1. æ°´å°å¼ºåº¦å·²å›ºå®šä¸º10ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®ã€‚
2. æ°´å°å›¾ç‰‡çš„å°ºå¯¸åº”å°äºåŸå§‹å›¾ç‰‡ã€‚
3. è¾“å‡ºè·¯å¾„å¯ä»¥ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ·»åŠ  `.png` æ‰©å±•åã€‚
4. æ¢å¤åŠŸèƒ½ä¸å†éœ€è¦æŒ‡å®šæ°´å°å¼ºåº¦ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†ã€‚
5. ä½¿ç”¨é”™è¯¯çš„ç§é’¥è¿›è¡Œæ¢å¤ä¼šå¯¼è‡´å›¾åƒä¸¥é‡å¤±çœŸï¼Œè¿™æ˜¯ç³»ç»Ÿçš„å®‰å…¨ç‰¹æ€§ã€‚